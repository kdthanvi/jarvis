CREATE DATABASE jarvis;
USE jarvis;

CREATE TABLE USERS(
USERNAME VARCHAR (20) NOT NULL ,
EMAIL VARCHAR (50) NOT NULL PRIMARY KEY,
PASSWORD VARCHAR(30) NOT NULL,
UTYPE VARCHAR(1) NOT NULL,
IMAGE LONGBLOB
);

CREATE TABLE PROJECT(
PROJECT_ID INT NOT NULL PRIMARY KEY,
P_NAME VARCHAR(50),
P_DESCRIPTION TEXT,
STATUS VARCHAR(10),
BHK INT,
START DATE,
FINISH DATE,
IMAGE1 LONGBLOB,
IMAGE2 LONGBLOB,
IMAGE3 LONGBLOB,
LOCALITY VARCHAR(30),
C_EMAIL VARCHAR(50),
FOREIGN KEY (C_EMAIL)
REFERENCES USERS(EMAIL)
ON DELETE CASCADE
ON UPDATE CASCADE
);

CREATE TABLE Q_A(
PROJECT_ID INT,
QUESTION VARCHAR(300) PRIMARY KEY,
ANSWER TEXT,
U_EMAIL VARCHAR(50),
FOREIGN KEY (U_EMAIL)
REFERENCES USERS(EMAIL)
ON DELETE CASCADE
ON UPDATE CASCADE,
FOREIGN KEY (PROJECT_ID)
REFERENCES PROJECT(PROJECT_ID)
ON DELETE CASCADE
ON UPDATE CASCADE
);

CREATE TABLE REVIEWS(
PROJECT_ID INT,
U_EMAIL VARCHAR(50),
REVIEW TEXT,
FOREIGN KEY (PROJECT_ID)
REFERENCES PROJECT(PROJECT_ID)
ON DELETE CASCADE
ON UPDATE CASCADE,
FOREIGN KEY (U_EMAIL)
REFERENCES USERS(EMAIL)
ON DELETE CASCADE
ON UPDATE CASCADE
);


